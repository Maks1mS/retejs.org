# Selectable

::alert
Этот гайд основан на гайде [Basic](./basic). Желательно ознакомиться с ним для полноценного понимания текущего гайда
::


#### Выбираемые узлы

Как уже было описано [в пункте](./basic#selectable-nodes), сделать узлы выбираемыми вы можете с помощью расширения `selectableNodes`

```ts
const selector = AreaExtensions.selector()
const accumulating = AreaExtensions.accumulateOnCtrl()

AreaExtensions.selectableNodes(area, selector, { accumulating });
```

Как ясно из кода, пользователь может выбрать несколько узлов при нажатии на клавишу Ctrl. Выбранные узлы можно перемещать вместе

#### Выбираемые кастомные элементы

Любой вид элементов, которые вы добавите в область, может быть добавлен в селектор. Такие элементы могут вести себя как узлы: могут быть выбраны и перемещены совместно с остальными выбранными элементами.

Рассмотрим пример как добавить элемент в селектор

```ts
const id = 'element-id'
const label = 'element-type'

selector.add({
  id,
  label,
  translate(dx, dy) {
    // change position of current element by dx,dy
  },
  unselect() {
    // triggered when removed from selector
    // here you can trigger styles updating
  },
}, accumulating.active())
```

После этого `translate` будет вызываться при перемещении любого из выбранных узлов или других элементов.

Чтобы при перемещении вашего элемента другие выбранные элементы также были перемещены, вам сперва нужно пометить элемент, с которым непосредственно взаимодействует пользователь

```ts
selector.pick({ id, label })
```

Таким образом при срабатывании события, например `pointermove` вашего элемента, вы должны убедиться что это тот самый элемент, который был захвачен, и распространить смещение на все остальные

```ts
if (selector.isPicked({ id, label })) selector.translate(dx, dy)
```
где `dx`, `dy` это смещение вашего элемента в координатах области. Имейте ввиду, что при `transform.k` отличном от 1 они будут отличаться от экранных координат

Такой подход с `pick` + `isPicked` позволяет избежать зацикливания в случае, когда вместо прямой подписки на `pointermove` вы используете общий обработчик как для пользовательский взаимодействий, так и для программных, которые в том числе вызываются при срабатывании `translate` обработчика вызова `selector.add`

Чтобы удалить элемент из селектора, просто вызовите.

```ts
selector.remove({ id, label })
```

#### Другие примеры использования

- [Comments](./comments#selectable)
- [Reroute](./reroute#selectable)

