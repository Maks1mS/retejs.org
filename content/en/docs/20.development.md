# Development

Эта статья документации предназначена для тех, кто хочет разработать новые плагины, внести вклад в существующие или отладить их.

## Rete CLI

Rete CLI это инструмент, которые выполняет роль бандлера со встроенной поддержкой TypeScript и ESLint с преопределнными правилами. Также он имеет встроеный таск раннер Jest. Все это позволил вам легко начать разработку новых плагинов без необходимости самому настраивать окружение для сборки, линтинга и тестирования.

Сборщик основан на Rollup, имеет подключенные по Бабель пресеты для Тайпскрипт

### Установка

```bash
npm i -g rete-cli@next
```

### Сборка проекта

Сперва вам нужно создать конфиг, например, `rete.config.ts`:

```ts
import { ReteOptions } from 'rete-cli'

export default <ReteOptions>{
  input: 'src/index.ts',
  name: 'Rete'
}
```

Выполняем команду

```bash
rete build --config rete.config.ts
```

В результате мы получим директорию `dist`, которая готова к публикации. Директория содержит бандлы трех видов, дефиниции типов, README.md и package.json с указанием путей к ним.

Кроме этого, вы можете воспользоваться опцией `--watch` для сборки проекта при сохранении, а также `--outputs` чтобы указать пути (через запятую) куда записывать результаты сборки

### Линтинг

По умлчанию команда `rete build` перед генерированием бандлов выполняет линтинг, но вы можете отдельно выполнить линтинг командой

```bash
rete lint
```


## Rete Kit

Это инструмент, который направлен на повышение эффективности во время разработки плагинов или проектов, основанных на этом фреймворке.

Он включает в себя следующие возможности:

- Создание плагинов: создает базовую структуру плагина, который вы можете мгновенно начать разрабватывать, не тратя время на настройку сборщика, линтера и тест раннера
- Создание приложений: выберите фреймворк, на котором будет основываться ваше приложение, его версию и необходимые фичи - и в результате получайте приложение, с которого вы можете быстро начать разработку
- Массовая сборка: выберите копии репозиториев с исходным кодом разрабатываемых плагинов и этот инструмент начнет их сборку в режиме просмотра и синхронизирует их зависимости

### Установка

```bash
npm i -g rete-kit@next
```

### Создание приложения

В режиме опросника

```bash
rete-kit app
```

Или укажите опции

```bash
rete-kit app --name <name> --stack <stack> --stack-version <version> --features <features> --deps-alias <deps-alias>
```

где
- `<stack>` это одна из опций: angular, vue, vue-vite або react
- `<features>` - перечисленные через запятую фичи Rete.js редактора
- `<deps-alias>` - JSON файл с маппингом зависимостей (по умолчанию он устанавливает из npmjs по метке latest, но вы можете дугую версию в виде name@version или путь к tarball)

## Style guide

Мы используем ESLint, чтобы обеспечить единый стиль кода во всей пакетах. Данный конфиг предоставляется инструментом Rete CLI и содержит правила, которые по мнению мейнтейнеров являются более подходящими. При крайней необходимости вы можете расширять конфиг, указав нужные правила.

Поскольку линтеры не могут покрыть все кейсы, вот дополнительно список рекомендаций:

- Комментирование: оставляйте комментарии только там, где это необходимо. Проверьте можно ли измежать лишних комментариев путем рефакторинга кода, чтобы сделать его более смысловным.
- Простота: соблюдайте баланс между переиспользованием кода и объемом boilterplate кода. Иногда boilerplate код является более уместным, чем переусложненные конструкции, которые нивелируют этот шаблонный код.
- Обработка ошибок и исключения: всегда корректно обрабатывайте ошибки и исключения, предоставляя полезные сообщения об ошибках. Убедитесь, что выбрасываемые исключения не нарушают работу приложения и обрабатываются изящно, если это возможно.
- Производительность: код должен быть достаточно оптимизировать, чтобы при большом количестве данных не возникало чрезмерных задержек, но в то же время не рекомендуется жертвовать поддерживаемостью кода ради микрооптимизаций
