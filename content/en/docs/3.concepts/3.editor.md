# Editor

Редактор это класс, реализующий интерфейс для взаимодействия с графом. Он, как и остальные модули, расширяет Scope и продуцирует сигналы с возможностью подключения плагинов.

```ts
import { NodeEditor, BaseSchemes } from 'rete'

type Schemes = BaseSchemes // has Node { id: string } and Connection { id: string, source: string, target: string }

const editor = new NodeEditor<Schemes>()
```

Тип `Schemes` будет использователь для дальнейшей inferrence типов

Имеется [классический пресет](./presets#data-structures), повторяющий функционал построения узлов из первой версии.

Редактор можно использовать как на клиентской, так и на серверной стороне. Если на клиентской строне он будет предоставлять данные для визуализации, то на серверной он может предосталвять их для обработки графов, к примеру, с помощью Движка или любые другие манипуляции с помощью модуля "структуры"

## Создание 2D области

Для визуацизации на HTML вам потребуется `rete-area-plugin`. Он отвечает за такой базовый функционал как Зум и Перетаскиевание. Также он является точкой входа для остальных плагинов для визуалиации и взаимодействия с пользователем.

```ts
import { AreaPlugin } from 'rete-area-plugin'

const area = new AreaPlugin<Schemes, AreaExtra>(container) // container is HTMLElement where the area will be inserted
```

Тип `AreaExtra` необходим для внедрения других типов сигналов, например рендеринг других видов элементов кроме `node` и `connection`

Этот плагин имеет расширения, часть из которых повторяет функционал из первой версии, но с одним отличием - они опциональны. Например, расширение выбора узлов поддерживает не только выбор узлов и может быть расширено (смотрите пример плагина комментариев), но и может быть заменено на альтернативную реализацию

```ts
import { AreaExtensions } from 'rete-area-plugin'

AreaExtensions.selectableNodes(area, AreaExtensions.selector(), {
  accumulating: AreaExtensions.accumulateOnCtrl()
})
```

## Взаимодействие с соединениями

Плагин `rete-connection-plugin` отвечает за взаимодействие пользователя с узлами (создание, удаление)

```ts
import { BidirectFlow, ConnectionPlugin, Presets as ConnectionPresets } from 'rete-connection-plugin'

const connection = new ConnectionPlugin<Schemes, AreaExtra>()

connection.addPreset(ConnectionPresets.classic.setup())
```

В отличии от Rete.js v1, этот плагин не занимается визуалиацией соединений.

## Rendering

Рендерингом UI занимаются исключительно плагины для рендеринга (кроме пары особых случаев), которые предоставляют пресеты для различных видов функционала.

Рассмотрим пример используя `rete-react-render-plugin`

```ts
import { ReactArea2D, ReactRenderPlugin, Presets as ReactPresets } from 'rete-react-render-plugin'
import { MinimapExtra } from 'rete-minimap-plugin'
import { ContextMenuExtra } from 'rete-context-menu-plugin'

type AreaExtra =
  | ReactArea2D<Schemes>
  | ContextMenuExtra<Schemes>
  | MinimapExtra<Schemes>

const reactPlugin = new ReactRenderPlugin<Schemes, AreaExtra>()

reactPlugin.addPreset(ReactPresets.classic.setup({ area }))
reactPlugin.addPreset(ReactPresets.contextMenu.setup())
reactPlugin.addPreset(ReactPresets.minimap.setup())

area.use(reactPlugin)
```

Каждый элемент редактора такой как узел, контрол, сокет или соединеине техничестки является отдельным деревом елементов, и это предоставляет гибкость в плане комбинирования разный фреймворков для рендеринга. Детали смотрите в статье [Интеграция](./integration).
