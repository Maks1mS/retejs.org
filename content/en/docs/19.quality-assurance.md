# Quality assurance

Данный проект использует два вида тестов - unit и E2E

Юнит тестами мы тестируем отдельные модули в пределах одного пакета. Данный подход хорош в силу своего быстродействия, хотя он не может гарантировать что весь продукт целиком работает корректно так, как его видит пользователь.

В свою очередь E2E тесты позволяют тестировать продукт целиком так, как это выглядит со стороны пользователя.

Для данного вида тестирования мы используем Playwright, который находится под капотом у пакета `rete-qa` и имеет набор готовых тестов UI на базовые фичи фреймворка.

Основные правила, которых нужно придерживаться при написании тестов:

- создавать как можно более простые тесты: вы не должны тратить много времени на написание тестов, так и на их чтение
- не сосредотачивайтесь на метриках покрытия кода: используйте отчеты как справочник, но не делайте выводы исходя из % покрытия тестами
- тестируйте одну вещь за раз: это поможет лучше локализовать проблему
- покрывайте крайние случаи: поможет вам писать более надежные тесты

## Rete QA инструмент

Данный инструмент в первую очередь предназначен для регрессионного UI тестирования различных комбинаций поддерживаемых фич, представленных в виде отдельных пакетов и различных интеграций с UI фреймворками.

Он использует Playwright как основу для тестирования и запускает тесты в трех видах браузеров: chromium, firefox, webkit.

Кроме этого, тесты проводятся на различных версиях UI фреймворков, таких как Angular, Vue.js, React.js

Таким образом мы имеем матрицу из браузеров и версий фреймворков: (chromium, firefox, webkit) x (Angular 12, Angular 15, Vue.js 2, Vue.js 3, React.js 16, React.js 18) что дает нам в результате 18 прогонов тестов в разных окружениях

### Установка

```bash
npm i -g rete-qa
```

Также установите дополнительные системные зависимости по [инструкцией от Playwright](https://playwright.dev/docs/ci#introduction)

### Инциализация

Запустите команду и ожидайте, пока будут созданы проекты под разные фреймворки и остановятся их зависимости

```bash
rete-qa init --deps-alias dependencies.json
```

где `dependencies.json` (опционально) JSON файл с маппингом зависимостей

По умолчанию зависимости устанавливаются из npmjs по метке latest, но вы можете дугую версию в виде name@version или путь к tarball. Например, подменить плагин на вашу версию плагина, которая не опубликована

```json
{
  "my-rete-plugin": "../my-plugin/my-rete-plugin-1.0.0.tgz"
}
```

### Запустите тесты

Run tests for provided stacks (react, vue, angular) and different browsers (chromium, firefox, webkit)

```bash
rete-qa test
```



